## GIT DIFF
`git diff` - показывает разницу между неотслеживаемым состоянием и последним снимком репозитория

`git diff --staged` (или `--cached`) - разница между отслеживаемым и то, что попадет в коммит  
 `git diff HEAD` - показывает разницу между текущим состояниeм рабочей директории и тем, что попадет в коммит. Короче можно посмотреть, какие изменения и в каком файле сейчас в индексе и попадут в репозиторий при коммите.

`git diff COMMIT_ID `- разница между текущим состоянием и указанным снимком

`git diff commit/branch commit/branch` - разница между двумя источниками  
`git diff commit/branch..commit/branch` - также есть синтаксис через 2 точки (аналог верхней команды)

`git diff master...feature` - три точки указывают различия в feature с тех пор, когда она отошла от ветки master (ищет общего предка)

`git diff -- file_name/dir_name` - выведет те изменения, которые затрагивают этот файл или директорию  
`git diff master feature index.html script.js` - покажет различия в файлах между ветками

`git diff --name-only master feature` - покажет, в каких файлах были изменения между этими ветками

`git diff master:one.html feature:two.html` - также можно сравнить два разных пути(файла) из разных веток

`git diff -U0 master commit index.html` - урежет строки вокруг изменений. По умолчанию 3

-----------------------------------------------------
## GIT LOG
`git log`
`git log --oneline` (показывает хеши и коммиты в одну строку)  
`git log --oneline --all` (показывает все коммиты)  
`git log --oneline --all --graph` (покажет коммиты в виде графа)  
`git log -1` (показывает последний коммит. -N - покажет последние N коммитов)  
`git log --follow [файл]` (История изменений конкретного файла, включая его переименование)  
`git fileName -p hashCommit` (выводит состояние файла в определенном коммите в читаемом формате (-p))

Например, мы находимся на ветке __main__ и хотим посмотреть коммиты только этой ветки, игнорируя другие ветки (но надо сливать всегда из __main__ до этого). Удобно, если при слиянии до этого использовался флаг `--log`, чтобы просматривать изменения из других веток  
`git log --oneline --first-parent`  

Если нужно вывести коммиты конкретной ветки, то нужно передать ее как параметр  
`git log hash/branch_name --oneline`  

`git log --pretty=oneline --abbrev-commit` - (или просто `git log --oneline`) идентификатор (короткий) и название коммита

`git log --pretty=format: 'params'`  
params:  
- %C(yellow) - применится к остатку строки (цвета можно посмотреть в `git help config`) либо HEX цвета
- %h - короткий идентификатор коммита
- %cd - дата коммитера
- %cr - относительная дата
- %s - заголовок коммита
- %d - декорирование (какие ссылки на указывают на заголовок)
- %an - имя автора  
`git log --pretty=format:'%C(yellow)%h %C(green)%cr | %C(white)%s%d [%an]' --date=format: '%F %R`

Можно занести это в конфиг  
`git config --global pretty.my format: 'git log --pretty=format:'%C(yellow)%h %C(green)%cr | %C(white)%s%d [%an]' --date=format: '%F %R'`  
И потом вызвать  
`git log --pretty=my`  
Или вообще поставить по умолчанию  
`git config --global format.pretty my`  
И теперь  
`git log`  

Также можно вызвать коммиты с изменениями  
`git log -p`  

Также можно смотреть логи нескольких веток  
`git log main feature --graph`  

Вывести все ветки графом можно командой  
`git log --all --graph`  

Если нужно узнать про коммиты ветки с тех пор, как она отошла от другой ветки  
`git log feature ^main`  (либо `git log feature..main`) + если нужен пограничный коммит, то нужен флаг `--boundary`  

Если нужны коммиты, меняющие определенный файл (+посмотреть конкретные различия)
`git log index.html -p`  

Если в процессе файл был переименован, то есть флаг `--follow`  
`git log -p --follow index.html` 

### Флаги-фильтры git log
`git log --grep sayHi` - флаг `--grep` для поиска по вхождению  
`git log --grep sayHi feature` - в определенной ветке или коммите  
`git log --grep sayHi --grep sayBye` - или то, или то 
`git log --grep sayHi --grep sayBye --all-match` - и то, и другое 

Если сейчас функция называется так, а раньше по-другому, можно искать по этому изменению  
`git log -Gsayhi -p -i index.html`  
Или где была объявлена  
`git log -G'function sayhi\(' -p -i index.html`  

Если нужны более сложные выражения (например, в конкретном блоке), то есть флаг `-L`  
`git log -L '/<head>/','/<\/head>/':index.html`  

Можно искать по дате  
`git log --before '2021-10-17`  
`git log --after '1 day ago`  
`git log --before '2021-10-17 6:30:00`  

---
## GIT BLAME
Можно найти того, кто писал ту или иную строку  
`git blame index.html`  
Либо немного настроить вывод  
`git blame --date=short -L 5,8`  

-----------------------------------------------------
## GIT SHOW
`git show [коммит]` (Выводит информацию и показывает изменения в выбранном коммите)  
`git show -num `(показывает информацию о коммитах в обратном порядке)

Если нужно посмотреть, как выглядел конкретный файл в предыдущем коммите:  
`git show @~:index.html`  
`git show hash/branch:index.html`  
Если изменения еще не попали в индекс, изменения можно посмотреть через `git diff index.html`. Но если изменения уже в индексе, можно посмотреть, каким файл попадет в коммит через команду `git show :index.html`.

Если хэш коммита неизвестен, но помнишь название функции или слово из измененного кода, можно найти ближайший коммит через поиск:  
`git show :/function_name`  
